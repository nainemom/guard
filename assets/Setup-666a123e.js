import{r as l,j as e,D as v,a as N,b as k,B as u,I as x,s as f,u as w,c as K}from"./index-42287fa4.js";import{u as g,F as A,I as j,g as _,a as P,o as C,L,B as E}from"./files-80985983.js";function I({onSuccess:s,onClose:t}){const[r,o]=g(),[h,i]=l.useState(r||{});l.useEffect(()=>{i(r||{})},[r]);const d=l.useCallback(a=>{var y,p;let m={};return(((y=a==null?void 0:a.public_key)==null?void 0:y.length)||0)<10&&(m.public_key="This field is required!"),(((p=a==null?void 0:a.private_key)==null?void 0:p.length)||0)<10&&(m.private_key="This field is required!"),m},[]),n=l.useCallback(a=>{i(a)},[i]),c=l.useCallback(()=>{t&&t()},[t]),b=l.useCallback(a=>{a&&(o(a),s&&s(),c())},[s,c]);return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"Edit Personal Keys",closeButton:!0,onClose:c}),e.jsxs(A,{value:h,onInput:n,onSubmit:b,validator:d,children:[e.jsxs(N,{className:"p-3",children:[e.jsx("div",{className:"mb-3",children:e.jsx(j,{className:"h-52",name:"public_key",size:"manual",multiLine:!0,placeholder:"Your Public Key.",label:"Public Key:"})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-danger-normal h-52",name:"private_key",size:"manual",multiLine:!0,placeholder:"Your Private Key.",label:"Private Key:"}),e.jsx("p",{className:"mt-3 text-xs text-body-subtitle",children:"Never share this value to anyone!"})]})]}),e.jsx(k,{children:e.jsxs(u,{type:"submit",theme:"primary",ariaLabel:"Submit Keys",children:[e.jsx(x,{name:"save",className:"w-5 h-5"}),"Save"]})})]})]})}function z(){const[s,t]=g(),[r,o]=l.useState(!1),h=l.useCallback(()=>{_().then(n=>{t(n),f("Account Generated!")})},[s]),i=l.useCallback(async()=>{try{const n=await P(),c=await C(n);t(c),f("Account Updated!")}catch{}},[]),d=w();return l.useEffect(()=>{s!=null&&s.private_key&&(s!=null&&s.public_key)&&d("/contacts")},[s]),e.jsx(L,{children:e.jsxs(E,{className:"flex flex-col",children:[e.jsxs("div",{className:"flex-grow p-3 flex flex-col items-stretch justify-center gap-3 text-base w-full max-w-xs mx-auto",children:[e.jsx("div",{className:"flex flex-row justify-center",children:e.jsx("img",{src:"/guard/logo_white.svg",className:"w-24 h-24",alt:"Guard Logo"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Setup"}),e.jsx("p",{className:"text-sm text-body-subtitle",children:"Setup your Account to use Guard App!"})]}),e.jsxs(u,{theme:"primary",onClick:()=>h(),size:"lg",ariaLabel:"Generate new Account",children:[e.jsx(x,{name:"magic_button",className:"w-5 h-5"}),"Generate new Account!"]}),e.jsx("div",{className:"text-center border-b border- border-body-lighter"}),e.jsxs(u,{theme:"default",onClick:()=>i(),size:"lg",ariaLabel:"Import Account",children:[e.jsx(x,{name:"upload_file",className:"w-5 h-5"}),"Import via .auth File"]}),e.jsxs(u,{theme:"default",onClick:()=>o(!0),size:"lg",ariaLabel:"Manually Enter Keys",children:[e.jsx(x,{name:"edit",className:"w-5 h-5"}),"Manually Enter Keys"]})]}),e.jsx(K,{isOpen:r,children:r&&e.jsx(I,{onClose:()=>o(!1)})})]})})}export{z as default};
