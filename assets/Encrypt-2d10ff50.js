import{r as n,j as e,d as m,B as u,I as c,s as d}from"./index-47e1151a.js";import{h as p,L as h,B as x,I as f,e as y,s as g,b as j}from"./files-efc55599.js";import{u as b,H as w,s as E}from"./usePromise-bb76708e.js";function I({publicKey:s}){const[t,a]=n.useState("");return n.useEffect(()=>{s?p(s).then(a):a("")},[s]),e.jsx(e.Fragment,{children:t})}function B(){const{receiver:s}=m(),t=n.useMemo(()=>decodeURIComponent(s||""),[s]),a=b(r=>y(g(r),t).then(j),{debounceTimer:200,respectLoading:!1}),[o,i]=n.useState(""),l=async()=>{try{const r=await a.refresh(o);await E(r)==="clipboard"&&d("Encrypted Content Copied to Clipboard!")}catch(r){console.log(r)}};return e.jsxs(h,{children:[e.jsx(w,{title:"Guard Encrypt",subtitle:e.jsx(I,{publicKey:t})}),e.jsx(x,{className:"flex flex-col",stickyArea:e.jsx("div",{className:"m-3 flex flex-row gap-3",children:e.jsx(u,{theme:"primary",size:"lg",circle:!0,onClick:l,disabled:!t||!o,ariaLabel:"Share",children:a.state==="loading"?e.jsx(c,{name:"sync",className:"w-6 h-6 animate-spin"},"loading"):e.jsx(c,{name:"share",className:"w-6 h-6"})})}),children:e.jsx(f,{className:"h-full flex-grow",size:"manual",value:o,onInput:i,readOnly:a.state==="loading",multiLine:!0,placeholder:"Enter Your Raw Message."})})]})}export{B as default};
