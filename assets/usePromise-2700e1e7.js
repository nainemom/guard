import{j as r,e as w,r as d,f as I,B as M,u as R,g as D,I as x,s as G}from"./index-e4945fab.js";import{u as F,c as $,j as z,k as B}from"./files-24747366.js";function U(t){return new Promise(e=>{var s;const n=()=>{prompt("Copy this to clipboard!",t),e()};(s=navigator==null?void 0:navigator.clipboard)!=null&&s.writeText?navigator.clipboard.writeText(t).then(()=>e()).catch(n):n()})}function H(t){return navigator.share({text:t})}function O(t){try{return H(t).then(()=>"os")}catch{return U(t).then(()=>"clipboard")}}const W={onMenu:()=>{},onClick:()=>{}};function Y({children:t,className:e}){return r.jsx("ul",{className:w("x-list",e),children:t})}function V(t){const{children:e,className:n,clickable:s,selected:a,onClick:l,onMenu:u}={...W,...t},o=d.useCallback(h=>{h.preventDefault(),u(h)},[u]);return r.jsx("li",{className:w("x-list-item",s&&"x-list-item-clickable",a&&"x-list-item-selected",n),...s&&{onContextMenu:o,onClick:l,tabIndex:1},children:e})}function T(t){const{children:e,className:n,...s}={...I,...t};return r.jsx(M,{className:w("x-menu-activator",n),...s,children:e})}function g({children:t,className:e,onClick:n}){return r.jsx(V,{clickable:!0,className:w("p-3 py-3 min-h-[4.5rem] flex flex-row items-center gap-4",e),...n&&{onClick:n},children:t})}function q({children:t,className:e}){const n=d.Children.map(t,a=>(a==null?void 0:a.type)===T?a:null),s=d.Children.map(t,a=>(a==null?void 0:a.type)===g?a:null);return r.jsxs("div",{className:w("x-menu group",e),children:[n,r.jsx("div",{className:"hidden group-focus-within:block absolute bg-section-normal text-section-content shadow-2xl w-80 right-0 mt-4 mr-2 rounded-xl overflow-hidden z-10",children:r.jsx(Y,{className:"!gap-0",children:s})})]})}function ne({title:t,subtitle:e,startButtons:n}){const[s,a]=F(),l=R(),{pathname:u}=D(),o=()=>{if(!s)return;const j=z(s);B(j)},h=$(),L=()=>{if(!h)return;const j=`${window.location.origin}/guard/#${h}`;alert(j),O(j).then(p=>{p==="clipboard"&&G("Share Link Copied To Clipboard!")})};return r.jsxs("header",{className:"h-[4.5rem] shrink-0 flex items-center bg-section-normal text-section-content p-3 gap-3",children:[n&&r.jsx("div",{children:n}),r.jsxs("div",{className:"flex-grow flex flex-row items-center gap-3",children:[r.jsx("img",{src:"/guard/logo_white.svg",className:"w-10 h-10",alt:"Guard Logo"}),r.jsxs("div",{children:[t&&r.jsx("h2",{className:"text-xl font-semibold",children:t}),e&&r.jsx("p",{className:"text-xs text-section-subtitle",children:e})]})]}),r.jsx("a",{className:"x-button x-button-transparent x-button-rounded x-button-lg x-button-circle",href:"https://github.com/nainemom/guard",target:"_blank","aria-label":"Github Page",children:r.jsx(x,{name:"github",className:"h-6 w-6"})}),r.jsxs(q,{children:[r.jsx(T,{circle:!0,theme:"transparent",size:"lg",ariaLabel:"Profile Menu",children:r.jsx(x,{name:"manage_accounts",className:"w-8 h-8"})}),s&&u!=="/decrypt"&&r.jsxs(g,{onClick:()=>l("/decrypt"),children:[r.jsx(x,{name:"drafts",className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h3",{children:"Decrypt"}),r.jsx("p",{className:"text-xs text-section-subtitle",children:"You can decrypt your encrypted message through this page"})]})]},"decrypt"),s&&h&&!u.startsWith("/encrypt")&&r.jsxs(g,{onClick:()=>l(h),children:[r.jsx(x,{name:"mail_lock",className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h3",{children:"Encrypt"}),r.jsx("p",{className:"text-xs text-section-subtitle",children:"Your encryptor page (Guard Link)"})]})]},"encrypt"),s&&r.jsxs(g,{onClick:()=>L(),children:[r.jsx(x,{name:"share",className:"w-6 h-6 shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{children:"Share"}),r.jsx("p",{className:"text-xs text-section-subtitle",children:"Share your Guard Link to let others encrypt data for you"})]})]},"share"),s&&r.jsxs(g,{onClick:()=>o(),children:[r.jsx(x,{name:"save",className:"w-6 h-6 shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{children:"Export"}),r.jsx("p",{className:"text-xs text-section-subtitle",children:"Generate a .auth file from your account to access it in future"})]})]},"export"),s&&r.jsxs(g,{onClick:()=>a(null),children:[r.jsx(x,{name:"logout",className:"w-6 h-6 shrink-0"})," Logout"]},"logout"),!s&&r.jsxs(g,{onClick:()=>l("/setup"),children:[r.jsx(x,{name:"login",className:"w-6 h-6"}),r.jsxs("div",{children:[r.jsx("h3",{children:"Login"}),r.jsx("p",{className:"text-xs text-section-subtitle",children:"Login to your own account or just generate a new account"})]})]})]})]})}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e,n){J(t,e),e.set(t,n)}function J(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(t,e){var n=E(t,e,"get");return K(t,n)}function K(t,e){return e.get?e.get.call(t):e.value}function _(t,e,n){var s=E(t,e,"set");return Q(t,s,n),n}function E(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Q(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}var X=typeof Symbol<"u"?Symbol.toStringTag:"@@toStringTag",c=new WeakMap,b=new WeakMap;class y{constructor(e){var{executor:n=()=>{},internals:s=P(),promise:a=new Promise((l,u)=>n(l,u,o=>{s.onCancelList.push(o)}))}=e;S(this,c,{writable:!0,value:void 0}),S(this,b,{writable:!0,value:void 0}),f(this,X,"CancelablePromise"),this.cancel=this.cancel.bind(this),_(this,c,s),_(this,b,a||new Promise((l,u)=>n(l,u,o=>{s.onCancelList.push(o)})))}then(e,n){return C(i(this,b).then(v(e,i(this,c)),v(n,i(this,c))),i(this,c))}catch(e){return C(i(this,b).catch(v(e,i(this,c))),i(this,c))}finally(e,n){return n&&i(this,c).onCancelList.push(e),C(i(this,b).finally(v(()=>{if(e)return n&&(i(this,c).onCancelList=i(this,c).onCancelList.filter(s=>s!==e)),e()},i(this,c))),i(this,c))}cancel(){i(this,c).isCanceled=!0;var e=i(this,c).onCancelList;i(this,c).onCancelList=[];for(var n of e)if(typeof n=="function")try{n()}catch(s){console.error(s)}}isCanceled(){return i(this,c).isCanceled===!0}}class m extends y{constructor(e){super({executor:e})}}f(m,"all",function(e){return N(e,Promise.all(e))});f(m,"allSettled",function(e){return N(e,Promise.allSettled(e))});f(m,"any",function(e){return N(e,Promise.any(e))});f(m,"race",function(e){return N(e,Promise.race(e))});f(m,"resolve",function(e){return A(Promise.resolve(e))});f(m,"reject",function(e){return A(Promise.reject(e))});f(m,"isCancelable",k);function A(t){return C(t,P())}function k(t){return t instanceof m||t instanceof y}function v(t,e){if(t)return n=>{if(!e.isCanceled){var s=t(n);return k(s)&&e.onCancelList.push(s.cancel),s}return n}}function C(t,e){return new y({internals:e,promise:t})}function N(t,e){var n=P();return n.onCancelList.push(()=>{for(var s of t)k(s)&&s.cancel()}),new y({internals:n,promise:e})}function P(){return{isCanceled:!1,onCancelList:[]}}const Z=t=>new m((e,n,s)=>{let a=setTimeout(e,t);s(()=>{clearTimeout(a)})});function re(t,e={respectLoading:!1,debounceTimer:0}){const[n,s]=d.useState("none"),a=d.useRef(),l=d.useRef(),u=d.useRef(),o=d.useRef(),h=()=>{clearTimeout(u.current),o.current&&k(o.current)&&o.current.cancel(),o.current=void 0,s("none")},L=(...j)=>(e.respectLoading&&n==="loading"||(h(),s("loading"),o.current=Z(e.debounceTimer).then(()=>t(...j)).then(p=>(l.current=void 0,a.current=p,s("resolved"),p)).catch(p=>{throw l.current=p,a.current=void 0,s("rejected"),p})),o.current);return d.useEffect(()=>()=>{h(),s("none")},[]),d.useMemo(()=>({state:n,response:a.current,error:l.current,refresh:L}),[n])}export{ne as H,O as s,re as u};
