function U(){return U=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},U.apply(this,arguments)}var j;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(j||(j={}));var W=function(r){return r},Q="beforeunload",ie="hashchange",ue="popstate";function nt(r){r===void 0&&(r={});var e=r,t=e.window,n=t===void 0?document.defaultView:t,a=n.history;function i(){var p=X(n.location.hash.substr(1)),_=p.pathname,S=_===void 0?"/":_,P=p.search,V=P===void 0?"":P,C=p.hash,B=C===void 0?"":C,L=a.state||{};return[L.idx,W({pathname:S,search:V,hash:B,state:L.usr||null,key:L.key||"default"})]}var o=null;function s(){if(o)l.call(o),o=null;else{var p=j.Pop,_=i(),S=_[0],P=_[1];if(l.length){if(S!=null){var V=h-S;V&&(o={action:p,location:P,retry:function(){b(V*-1)}},b(V))}}else E(p)}}n.addEventListener(ue,s),n.addEventListener(ie,function(){var p=i(),_=p[1];I(_)!==I(v)&&s()});var u=j.Pop,c=i(),h=c[0],v=c[1],A=J(),l=J();h==null&&(h=0,a.replaceState(U({},a.state,{idx:h}),""));function f(){var p=document.querySelector("base"),_="";if(p&&p.getAttribute("href")){var S=n.location.href,P=S.indexOf("#");_=P===-1?S:S.slice(0,P)}return _}function x(p){return f()+"#"+(typeof p=="string"?p:I(p))}function O(p,_){return _===void 0&&(_=null),W(U({pathname:v.pathname,hash:"",search:""},typeof p=="string"?X(p):p,{state:_,key:se()}))}function d(p,_){return[{usr:p.state,key:p.key,idx:_},x(p)]}function $(p,_,S){return!l.length||(l.call({action:p,location:_,retry:S}),!1)}function E(p){u=p;var _=i();h=_[0],v=_[1],A.call({action:u,location:v})}function w(p,_){var S=j.Push,P=O(p,_);function V(){w(p,_)}if($(S,P,V)){var C=d(P,h+1),B=C[0],L=C[1];try{a.pushState(B,"",L)}catch{n.location.assign(L)}E(S)}}function D(p,_){var S=j.Replace,P=O(p,_);function V(){D(p,_)}if($(S,P,V)){var C=d(P,h),B=C[0],L=C[1];a.replaceState(B,"",L),E(S)}}function b(p){a.go(p)}var T={get action(){return u},get location(){return v},createHref:x,push:w,replace:D,go:b,back:function(){b(-1)},forward:function(){b(1)},listen:function(_){return A.push(_)},block:function(_){var S=l.push(_);return l.length===1&&n.addEventListener(Q,G),function(){S(),l.length||n.removeEventListener(Q,G)}}};return T}function G(r){r.preventDefault(),r.returnValue=""}function J(){var r=[];return{get length(){return r.length},push:function(t){return r.push(t),function(){r=r.filter(function(n){return n!==t})}},call:function(t){r.forEach(function(n){return n&&n(t)})}}}function se(){return Math.random().toString(36).substr(2,8)}function I(r){var e=r.pathname,t=e===void 0?"/":e,n=r.search,a=n===void 0?"":n,i=r.hash,o=i===void 0?"":i;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function X(r){var e={};if(r){var t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));var n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function oe(r){for(var e="#",t=1;t<r.length;t++){var n=r.charAt(t);e+=n+n}return e}function ce(r){(r.length===4||r.length===5)&&(r=oe(r));var e=[parseInt(r.substring(1,3),16),parseInt(r.substring(3,5),16),parseInt(r.substring(5,7),16)];if(r.length===9){var t=parseFloat((parseInt(r.substring(7,9),16)/255).toFixed(2));e.push(t)}return e}var at=ce;function fe(r){var e=r[0],t=r[1],n=r[2],a=Math.min(e,t,n),i=Math.max(e,t,n),o=i-a,s,u,c;return i==0?u=0:u=o/i*1e3/10,i==a?s=0:e==i?s=(t-n)/o:t==i?s=2+(n-e)/o:n==i&&(s=4+(e-t)/o),s=Math.min(s*60,360),s<0&&(s+=360),c=i/255*1e3/10,[s,u,c]}var it=fe;function le(r,e,t){return Math.min(Math.max(r,e),t)}var ve=le,he=ve;function F(r){var e=Math.round(he(r,0,255)),t=e.toString(16);return t.length==1?"0"+t:t}function pe(r){var e=r.length===4?F(r[3]*255):"";return"#"+F(r[0])+F(r[1])+F(r[2])+e}var ut=pe;function ge(r){var e=r[0]/60,t=r[1]/100,u=r[2]/100,n=Math.floor(e)%6,a=e-Math.floor(e),i=255*u*(1-t),o=255*u*(1-t*a),s=255*u*(1-t*(1-a)),u=255*u;switch(n){case 0:return[u,s,i];case 1:return[o,u,i];case 2:return[i,u,s];case 3:return[i,o,u];case 4:return[s,i,u];case 5:return[u,i,o]}}var st=ge;/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ee=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var de=ee;function Y(r){return de(r)===!0&&Object.prototype.toString.call(r)==="[object Object]"}var me=function(e){var t,n;return!(Y(e)===!1||(t=e.constructor,typeof t!="function")||(n=t.prototype,Y(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)},be={}.toString,ye=Array.isArray||function(r){return be.call(r)=="[object Array]"};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var _e=ye,xe=function(e){return e!=null&&typeof e=="object"&&_e(e)===!1};/*!
 * has-values <https://github.com/jonschlinkert/has-values>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ae=function(e,t){if(e==null)return!1;if(typeof e=="boolean")return!0;if(typeof e=="number")return!(e===0&&t===!0);if(e.length!==void 0)return e.length!==0;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1};/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var we=function(r,e,t,n,a){if(!Ne(r)||!e)return r;if(e=H(e),t&&(e+="."+H(t)),n&&(e+="."+H(n)),a&&(e+="."+H(a)),e in r)return r[e];for(var i=e.split("."),o=i.length,s=-1;r&&++s<o;){for(var u=i[s];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+i[++s];r=r[u]}return r};function Ne(r){return r!==null&&(typeof r=="object"||typeof r=="function")}function H(r){return r?Array.isArray(r)?r.join("."):r:""}/*!
 * has-value <https://github.com/jonschlinkert/has-value>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Oe=xe,Z=Ae,Se=we,Ee=function(r,e,t){return Oe(r)?Z(Se(r,e),t):Z(r,e)};/*!
 * unset-value <https://github.com/jonschlinkert/unset-value>
 *
 * Copyright (c) 2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Pe=ee,$e=Ee,Te=function(e,t){if(!Pe(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if($e(e,t)){for(var n=t.split("."),a=n.pop();n.length&&n[n.length-1].slice(-1)==="\\";)a=n.pop().slice(0,-1)+"."+a;for(;n.length;)e=e[t=n.shift()];return delete e[a]}return!0},Ve=me,Ce=Te,Le=function r(e,t){if(typeof e>"u")return{};if(Array.isArray(e)){for(var n=0;n<e.length;n++)e[n]=r(e[n],t);return e}if(!Ve(e)||(typeof t=="string"&&(t=[t]),!Array.isArray(t)))return e;for(var a=0;a<t.length;a++)Ce(e,t[a]);for(var i in e)e.hasOwnProperty(i)&&(e[i]=r(e[i],t));return e};/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var je=function(r){return r!=null&&(te(r)||Be(r)||!!r._isBuffer)};function te(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Be(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&te(r.slice(0,0))}var Me=je,qe=Object.prototype.toString,De=function(e){if(typeof e>"u")return"undefined";if(e===null)return"null";if(e===!0||e===!1||e instanceof Boolean)return"boolean";if(typeof e=="string"||e instanceof String)return"string";if(typeof e=="number"||e instanceof Number)return"number";if(typeof e=="function"||e instanceof Function)return"function";if(typeof Array.isArray<"u"&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var t=qe.call(e);return t==="[object RegExp]"?"regexp":t==="[object Date]"?"date":t==="[object Arguments]"?"arguments":t==="[object Error]"?"error":Me(e)?"buffer":t==="[object Set]"?"set":t==="[object WeakSet]"?"weakset":t==="[object Map]"?"map":t==="[object WeakMap]"?"weakmap":t==="[object Symbol]"?"symbol":t==="[object Int8Array]"?"int8array":t==="[object Uint8Array]"?"uint8array":t==="[object Uint8ClampedArray]"?"uint8clampedarray":t==="[object Int16Array]"?"int16array":t==="[object Uint16Array]"?"uint16array":t==="[object Int32Array]"?"int32array":t==="[object Uint32Array]"?"uint32array":t==="[object Float32Array]"?"float32array":t==="[object Float64Array]"?"float64array":"object"},re={exports:{}};(function(r){(function(){function e(t,n){if(typeof n!="function")return t;var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[n(i,t[i])||i]=t[i]);return a}r.exports?r.exports=e:window.rename=e})()})(re);/*!
 * deep-rename-keys <https://github.com/jonschlinkert/deep-rename-keys>
 *
 * Copyright (c) 2015 Jon Schlinkert, contributors.
 * Licensed under the MIT license.
 */var R=De,Fe=re.exports,He=function r(e,t){var n=R(e);if(n!=="object"&&n!=="array")throw new Error("expected an object");var a=[];n==="object"&&(e=Fe(e,t),a={});for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];R(o)==="object"||R(o)==="array"?a[i]=r(o,t):a[i]=o}return a},K={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function a(o,s,u){this.fn=o,this.context=s,this.once=u||!1}function i(){this._events=new n,this._eventsCount=0}i.prototype.eventNames=function(){var s=[],u,c;if(this._eventsCount===0)return s;for(c in u=this._events)e.call(u,c)&&s.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(u)):s},i.prototype.listeners=function(s,u){var c=t?t+s:s,h=this._events[c];if(u)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var v=0,A=h.length,l=new Array(A);v<A;v++)l[v]=h[v].fn;return l},i.prototype.emit=function(s,u,c,h,v,A){var l=t?t+s:s;if(!this._events[l])return!1;var f=this._events[l],x=arguments.length,O,d;if(f.fn){switch(f.once&&this.removeListener(s,f.fn,void 0,!0),x){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,u),!0;case 3:return f.fn.call(f.context,u,c),!0;case 4:return f.fn.call(f.context,u,c,h),!0;case 5:return f.fn.call(f.context,u,c,h,v),!0;case 6:return f.fn.call(f.context,u,c,h,v,A),!0}for(d=1,O=new Array(x-1);d<x;d++)O[d-1]=arguments[d];f.fn.apply(f.context,O)}else{var $=f.length,E;for(d=0;d<$;d++)switch(f[d].once&&this.removeListener(s,f[d].fn,void 0,!0),x){case 1:f[d].fn.call(f[d].context);break;case 2:f[d].fn.call(f[d].context,u);break;case 3:f[d].fn.call(f[d].context,u,c);break;case 4:f[d].fn.call(f[d].context,u,c,h);break;default:if(!O)for(E=1,O=new Array(x-1);E<x;E++)O[E-1]=arguments[E];f[d].fn.apply(f[d].context,O)}}return!0},i.prototype.on=function(s,u,c){var h=new a(u,c||this),v=t?t+s:s;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],h]:this._events[v].push(h):(this._events[v]=h,this._eventsCount++),this},i.prototype.once=function(s,u,c){var h=new a(u,c||this,!0),v=t?t+s:s;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],h]:this._events[v].push(h):(this._events[v]=h,this._eventsCount++),this},i.prototype.removeListener=function(s,u,c,h){var v=t?t+s:s;if(!this._events[v])return this;if(!u)return--this._eventsCount===0?this._events=new n:delete this._events[v],this;var A=this._events[v];if(A.fn)A.fn===u&&(!h||A.once)&&(!c||A.context===c)&&(--this._eventsCount===0?this._events=new n:delete this._events[v]);else{for(var l=0,f=[],x=A.length;l<x;l++)(A[l].fn!==u||h&&!A[l].once||c&&A[l].context!==c)&&f.push(A[l]);f.length?this._events[v]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new n:delete this._events[v]}return this},i.prototype.removeAllListeners=function(s){var u;return s?(u=t?t+s:s,this._events[u]&&(--this._eventsCount===0?this._events=new n:delete this._events[u])):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=t,i.EventEmitter=i,r.exports=i})(K);function m(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Ue=K.exports,M=function(){},y={data:"state-data",cdata:"state-cdata",tagBegin:"state-tag-begin",tagName:"state-tag-name",tagEnd:"state-tag-end",attributeNameStart:"state-attribute-name-start",attributeName:"state-attribute-name",attributeNameEnd:"state-attribute-name-end",attributeValueBegin:"state-attribute-value-begin",attributeValue:"state-attribute-value"},g={lt:"action-lt",gt:"action-gt",space:"action-space",equal:"action-equal",quote:"action-quote",slash:"action-slash",char:"action-char",error:"action-error"},N={text:"text",openTag:"open-tag",closeTag:"close-tag",attributeName:"attribute-name",attributeValue:"attribute-value"},Ie={" ":g.space,"	":g.space,"\n":g.space,"\r":g.space,"<":g.lt,">":g.gt,'"':g.quote,"'":g.quote,"=":g.equal,"/":g.slash},Re=function(e){return Ie[e]||g.char},ze=function(e){var t,n,a,i,o,s,u,c,h,v;e=Object.assign({debug:!1},e);var A=new Ue,l=y.data,f="",x="",O="",d="",$="",E="",w=function(T,p){if(!(x[0]==="?"||x[0]==="!")){var _={type:T,value:p};e.debug&&console.log("emit:",_),A.emit("data",_)}};A.stateMachine=(v={},m(v,y.data,(t={},m(t,g.lt,function(){f.trim()&&w(N.text,f),x="",$=!1,l=y.tagBegin}),m(t,g.char,function(b){f+=b}),t)),m(v,y.cdata,m({},g.char,function(b){f+=b,f.substr(-3)==="]]>"&&(w(N.text,f.slice(0,-3)),f="",l=y.data)})),m(v,y.tagBegin,(n={},m(n,g.space,M),m(n,g.char,function(b){x=b,l=y.tagName}),m(n,g.slash,function(){x="",$=!0}),n)),m(v,y.tagName,(a={},m(a,g.space,function(){$?l=y.tagEnd:(l=y.attributeNameStart,w(N.openTag,x))}),m(a,g.gt,function(){w($?N.closeTag:N.openTag,x),f="",l=y.data}),m(a,g.slash,function(){l=y.tagEnd,w(N.openTag,x)}),m(a,g.char,function(b){x+=b,x==="![CDATA["&&(l=y.cdata,f="",x="")}),a)),m(v,y.tagEnd,(i={},m(i,g.gt,function(){w(N.closeTag,x),f="",l=y.data}),m(i,g.char,M),i)),m(v,y.attributeNameStart,(o={},m(o,g.char,function(b){O=b,l=y.attributeName}),m(o,g.gt,function(){f="",l=y.data}),m(o,g.space,M),m(o,g.slash,function(){$=!0,l=y.tagEnd}),o)),m(v,y.attributeName,(s={},m(s,g.space,function(){l=y.attributeNameEnd}),m(s,g.equal,function(){w(N.attributeName,O),l=y.attributeValueBegin}),m(s,g.gt,function(){d="",w(N.attributeName,O),w(N.attributeValue,d),f="",l=y.data}),m(s,g.slash,function(){$=!0,d="",w(N.attributeName,O),w(N.attributeValue,d),l=y.tagEnd}),m(s,g.char,function(b){O+=b}),s)),m(v,y.attributeNameEnd,(u={},m(u,g.space,M),m(u,g.equal,function(){w(N.attributeName,O),l=y.attributeValueBegin}),m(u,g.gt,function(){d="",w(N.attributeName,O),w(N.attributeValue,d),f="",l=y.data}),m(u,g.char,function(b){d="",w(N.attributeName,O),w(N.attributeValue,d),O=b,l=y.attributeName}),u)),m(v,y.attributeValueBegin,(c={},m(c,g.space,M),m(c,g.quote,function(b){E=b,d="",l=y.attributeValue}),m(c,g.gt,function(){d="",w(N.attributeValue,d),f="",l=y.data}),m(c,g.char,function(b){E="",d=b,l=y.attributeValue}),c)),m(v,y.attributeValue,(h={},m(h,g.space,function(b){E?d+=b:(w(N.attributeValue,d),l=y.attributeNameStart)}),m(h,g.quote,function(b){E===b?(w(N.attributeValue,d),l=y.attributeNameStart):d+=b}),m(h,g.gt,function(b){E?d+=b:(w(N.attributeValue,d),f="",l=y.data)}),m(h,g.slash,function(b){E?d+=b:(w(N.attributeValue,d),$=!0,l=y.tagEnd)}),m(h,g.char,function(b){d+=b}),h)),v);var D=function(T){e.debug&&console.log(l,T);var p=A.stateMachine[l],_=p[Re(T)]||p[g.error]||p[g.char];_(T)};return A.write=function(b){for(var T=b.length,p=0;p<T;p++)D(b[p])},A},Ke={State:y,Action:g,Type:N,create:ze},ke=K.exports,ne=Ke,q=ne.Type,k={element:"element",text:"text"},z=function(e){return Object.assign({name:"",type:k.element,value:"",parent:null,attributes:{},children:[]},e)},ae=function(e){e=Object.assign({stream:!1,parentNodes:!0,doneEvent:"done",tagPrefix:"tag:",emitTopLevelOnly:!1,debug:!1},e);var t=void 0,n=void 0,a=void 0,i=void 0,o=new ke,s=function(c){switch(c.type){case q.openTag:if(a===null)a=n,a.name=c.value;else{var h=z({name:c.value,parent:a});a.children.push(h),a=h}break;case q.closeTag:var v=a.parent;if(e.parentNodes||(a.parent=null),a.name!==c.value)break;e.stream&&v===n&&(n.children=[],a.parent=null),(!e.emitTopLevelOnly||v===n)&&(o.emit(e.tagPrefix+a.name,a),o.emit("tag",a.name,a)),a===n&&(t.removeAllListeners("data"),o.emit(e.doneEvent,a),n=null),a=v;break;case q.text:a&&a.children.push(z({type:k.text,value:c.value,parent:e.parentNodes?a:null}));break;case q.attributeName:i=c.value,a.attributes[i]="";break;case q.attributeValue:a.attributes[i]=c.value;break}};return o.reset=function(){t=ne.create({debug:e.debug}),t.on("data",s),n=z(),a=null,i="",o.parse=t.write},o.reset(),o},We=function(e,t){t=Object.assign({},t,{stream:!1,tagPrefix:":"});var n=ae(t),a=void 0;return n.on("done",function(i){a=i}),n.parse(e),a},Qe={parseSync:We,create:ae,NodeType:k},Ge=function(e){var t=Qe.parseSync("<root>".concat(e,"</root>"),{parentNodes:!1}),n=t.children&&t.children.length>0&&t.children.every(function(a){return a.name==="svg"});if(n)return t.children.length===1?t.children[0]:t.children;throw Error("nothing to parse")},Je=function(e){return Le(e,["parent"])},Xe=function(e){return He(e,function(t){return Ze(t)?t:Ye(t)})},Ye=function(e){return e.replace(/[-|:]([a-z])/gi,function(t,n){return n.toUpperCase()})},Ze=function(e){return/^(data|aria)(-\w+)/.test(e)},et=function(e){if(e){var t=String(e);return/[&<>]/.test(t)?"<![CDATA[".concat(t.replace(/]]>/,"]]]]><![CDATA[>"),"]]>"):t}return""},tt=function(e){return String(e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},ot=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transformNode,a=n===void 0?function(u){return u}:n,i=t.camelcase,o=i===void 0?!1:i,s=function(c){var h;return h=Je(c),h=a(h),o&&(h=Xe(h)),h};return s(Ge(e))},ct=function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transformAttr,a=n===void 0?function(l,f,x){return"".concat(l,'="').concat(x(f),'"')}:n,i=t.transformNode,o=i===void 0?function(l){return l}:i,s=t.selfClose,u=s===void 0?!0:s;if(Array.isArray(e))return e.map(function(l){return r(l,{transformAttr:a,selfClose:u,transformNode:o})}).join("");var c=o(e);if(c.type==="text")return et(c.value);var h="";for(var v in c.attributes){var A=a(v,c.attributes[v],tt,c.name);h+=A?" ".concat(A):""}return c.children&&c.children.length>0||!u?"<".concat(c.name).concat(h,">").concat(r(c.children,{transformAttr:a,transformNode:o,selfClose:u}),"</").concat(c.name,">"):"<".concat(c.name).concat(h,"/>")};export{it as a,st as b,ct as c,nt as d,at as h,ut as r,ot as s};
