import{j as e,e as d,r,N as h}from"./index-c5eed8fe.js";import{n as f,u as y,c as b,d as j,f as N,L as E,B as k,I as v}from"./files-4f820b59.js";import{H as g}from"./Header-3f1aa65f.js";function w({children:t,className:s}){return e.jsx("div",{className:d("x-resizable",s),children:t})}function u({children:t,className:s}){return e.jsx("div",{className:d("x-resizable-section",s),children:t})}function R(){f();const[t]=y(),[s,p]=r.useState(""),[m,a]=r.useState(""),[o,l]=r.useState(),[x,n]=r.useState(!1);r.useEffect(()=>(clearTimeout(o),s&&l(setTimeout(async()=>{try{n(!1),t&&a(b(await j(N(s),t.private_key)))}catch{a(""),n(!0)}},300)),()=>{clearTimeout(o)}),[s,l,a,n]);const i=r.useMemo(()=>{if(!t)return;const c=new URL(window.location.href);return c.hash=`#/encrypt/${encodeURIComponent(t.public_key)}`,c.href},[]);return e.jsxs(E,{children:[e.jsx(g,{title:"Guard Decrypt",subtitle:"Decrypt received messages"}),e.jsx(k,{children:e.jsxs(w,{children:[e.jsx(u,{className:"h-64",children:e.jsx(v,{size:"manual",className:"h-full font-mono",value:s,onInput:p,multiLine:!0,placeholder:"Enter Encrypted Content."})}),e.jsxs(u,{className:"p-3",children:[e.jsx("h2",{className:"pb-2 text-base font-bold",children:" Output: "}),e.jsx("p",{className:"pb-4 text-base text-body-content h-full w-full break-all overflow-auto whitespace-pre-line",children:x?e.jsxs("div",{className:"space-y-2",children:[e.jsx("b",{className:"text-danger-normal font-bold",children:"Decrypt Error!"}),i&&e.jsxs("p",{className:"text-sm text-section-subtitle",children:["Encrypted content must be created using your ",e.jsx(h,{className:"underline underline-offset-4",to:i,target:"_blank",children:"Guard link"}),"."]})]}):e.jsx(e.Fragment,{children:m})})]})]})})]})}export{R as default};
